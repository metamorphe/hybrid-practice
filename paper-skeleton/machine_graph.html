<!-- SENSOR AND ACTUATION INTERFACE -->
<html>
	<body background="background2.png" bgcolor="#333333">
		<head>
				<title>Sensor and Actuation Interface</title>
				<script type="text/javascript" src="libs/jquery.min.js"></script>
				<script type="text/javascript" src="libs/paper-full.min.js"></script>
				<script type="text/javascript" src="libs/bootstrap.min.js"></script>
				<script type="text/javascript" src="libs/underscore.js"></script>
				<script type="text/javascript" src="libs/saveas.min.js"></script>
				<script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
				<link rel="stylesheet" type="text/css" href="css/bootstrap.css"></style>
		</head>

		<body>
			<div class="container">
				<div class="row">
					<div id="viz" class="col-xs-8">
						<h1>Graph</h1>
						<body>
							<script type="text/javascript">
								
								var margin = {top: 30, right: 20, bottom: 30, left: 50},
								    width = 700 - margin.left - margin.right,
								    height = 400 - margin.top - margin.bottom;

								// Parse the date / time
								var parseDate = d3.time.format("%d-%b-%y").parse;

								// Set the ranges
								var x = d3.scale.linear().range([0, width]);
								var y = d3.scale.linear().range([height, 0]);

								// Define the axes
								var xAxis = d3.svg.axis().scale(x)
								    .orient("bottom").ticks(11);

								var yAxis = d3.svg.axis().scale(y)
								    .orient("left").ticks(5);

								// Define the line
								var valueline = d3.svg.line()
								    .x(function(d) { return x(d.date); })
								    .y(function(d) { return y(d.close); });
								    
								// Adds the svg canvas
								var svg = d3.select('#viz')
								    .append("svg")
								        .attr("width", width + margin.left + margin.right)
								        .attr("height", height + margin.top + margin.bottom + 20)
								    .append("g")
								        .attr("transform", 
								              "translate(" + margin.left + "," + margin.top + ")");

								// Get the data
								d3.csv("data.csv", function(error, data) {
								    data.forEach(function(d) {
								        d.date = d.date;
								        d.close = +d.close;
								    });

								    // Scale the range of the data
								    x.domain(d3.extent(data, function(d) { return d.date; }));
								    y.domain([0, d3.max(data, function(d) { return d.close; })]);

								    // Add the valueline path.
								    svg.append("path")
								        .attr("class", "line")
								        .attr("d", valueline(data));

								    // Add the X Axis
								    svg.append("g")
								        .attr("class", "x axis")
								        .attr("transform", "translate(0," + height + ")")
								        .call(xAxis);

								    // Add the Y Axis
								    svg.append("g")
								        .attr("class", "y axis")
								        .call(yAxis);

								    svg.append("text")
										.attr("x",width/2 - 20)
										.attr("y",height + 45)
										.style("text-anchor","middle")
										.text("Time");	

									svg.append("text")
										.attr("x",0)
										.attr("y",-2)
										.style("text-anchor","middle")
										.text("Value of A");	


									svg.append("text")
										.attr("x",width/2 - 20)
										.attr("y", -10)
										.style("text-anchor","middle")
										.style("font-size","20px")
										.text("Machine A");	

								});
							</script>
						</body>
					</div>
					<div id="status" class="col-xs-4">	
						<h1>Status</h1>
						<body>
							<h3 id="header"></h3>
							<script type="text/javascript">
								$(function(){
									// MAIN
									document.getElementById("header").innerHTML = $('#slider1').val();
									$('#slider1').on('input', function(){
										document.getElementById("header").innerHTML = $('#slider1').val();
										$('#output').text(function (d) {
											return $('#slider1').val();
										});
									});
								});

							</script>
						</body>
					</div>
				</div>
				<div class="row">
					<div id="range" class="col-xs-12"> 
						<h1> Range </h1>
						 <input class="form-control" id="slider1" type="range" min="0" max="100" step="10" value = "0" onchange=""getSlideValue();""/>
					</div>
				</div>
			</div>
		</body>

		<style type="text/css">
			#viz{
				background-color: white;
				height: 500px;
				border: 2px solid black;
			}
			#status{
				background-color: white;
				height: 500px;
				border: 2px solid black;
			}
			#range {
				background-color: white;
				height: 300px;
				border: 2px solid black;
			}
		</style>
	</body>
</html>