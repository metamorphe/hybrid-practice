%head
  :javascript
    var files = #{@files.to_json.html_safe};
    var DEFAULT_PIPE_FILE = "example_sunmoon_4inches.svg";
    var ah, ps, gui, jhg, sm, ws;
    
    // Using the property s_selected to keep track of element styling
    var JOULE_SELECT = function(path){
      if(path.closed)
        path.set({strokeWidth: 4, strokeColor: "#00A8E1"});
      else
        path.set({strokeWidth: 4,  strokeColor: "#00A8E1", dashArray: []})
    }
    $(function(){ 
      $("#shade").fadeOut("slow");
      Utility.paperSetup('myCanvas');
      paper.project.activeLayer.name = "JouleHeaterGenerator";
      ps = new PerceptualScheduler(paper);
      gui = new dat.GUI();
      ws = new WebStorage();
      sm = new SelectionManager(JOULE_SELECT);
      jhg = new JouleHeater(gui);
      jh = new JouleHeaterSimulator();

    });
%body
  #view-container
    #main-canvas-container
      %canvas#myCanvas.paper
:css
  body, html{
     		width: 100%;
     		height: 100%;
     		background: #f5f4f0;
        	/*overflow: hidden;*/
     	}
      #view-container{
        height: 100%;
        /*overflow: hidden;*/
      }
      #main-canvas{
  		height: 100%;
  	}
  	#main-canvas-container{
  	  position: relative;
  	  height: calc(100% - 0px);
  	  width: 100%;
  	  overflow: hidden;
  	}
  	.paper{
  	  background: #f5f4f0;
  	  position: relative;
  	  top: 0px;
  	  z-index: 0;
  	  cursor: pointer;
  	  -webkit-box-shadow: inset 2px 4px 15px 2px rgba(0,0,0,0.2);
  		-moz-box-shadow: inset 2px 4px 15px 2px rgba(0,0,0,0.2);
  		box-shadow: inset 2px 4px 15px 2px rgba(0,0,0,0.2);
  	}
